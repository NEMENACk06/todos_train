<!-- app/views/categories/index.html.erb -->
<div class="w-full mx-auto p-6 bg-gradient-to-b from-indigo-50 to-pink-50 min-h-screen">
  <h1 class="text-3xl font-extrabold mb-8 text-center text-indigo-700">ðŸ“‹ Categories & Todos</h1>
  <!-- Add Category Form -->
  <div class="mb-10">
    <%= form_with model: @category, class: "flex space-x-2" do |f| %>
      <%= f.text_field :name,
        placeholder: "New category",
        class: "flex-1 border-2 border-indigo-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-pink-400" %>
      <%= f.submit "âž• Add Category",
        class: "px-5 py-2 bg-pink-500 text-white font-semibold rounded hover:bg-pink-600 transition" %>
    <% end %>
  </div>
  <!-- Categories Loop -->
  <div class="space-y-8">
    <% @categories.each do |category| %>
      <div class="border-2 border-indigo-200 rounded-xl bg-white shadow-lg p-5">
        <h2 class="text-xl font-bold text-indigo-600 mb-4 flex justify-between items-center">
          ðŸ’¡ <%= category.name %>
          <%= link_to "ðŸ—‘ Delete",
              category_path(category),
              data: { turbo_method: :delete, turbo_confirm: "Delete this category and its todos?" },
              class: "text-red-500 hover:text-red-700" %>
        </h2>
        <!-- Todos list (à¹ƒà¸«à¹‰ turbo_stream.append à¸¡à¸²à¹ƒà¸ªà¹ˆà¸—à¸µà¹ˆà¸™à¸µà¹ˆ) -->
        <ul id="<%= dom_id(category, :todos) %>" class="space-y-2">
          <%= render category.todos, category: category %>
        </ul>
        <!-- Add Todo Form (à¹ƒà¸«à¹‰ turbo_stream.replace à¹€à¸žà¸·à¹ˆà¸­à¹€à¸„à¸¥à¸µà¸¢à¸£à¹Œà¸Ÿà¸­à¸£à¹Œà¸¡) -->
        <div class="mt-5">
          <%= render "todos/form", category: category, todo: category.todos.build %>
        </div>
      </div>
    <% end %>
  </div>
</div>
